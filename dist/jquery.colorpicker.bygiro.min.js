var bg=bg||!1;bg||("undefined"!=typeof jQuery?bg=jQuery:"undefined"!=typeof angular&&(bg=angular.element,bg.extend=angular.extend,bg.prototype.slideUp=$.prototype.hide=function(){var e,t=this;for(e=0;e<t.length;e++)t[e].style.display="none";return t},bg.prototype.slideDown=$.prototype.show=function(){var e,t=this;for(e=0;e<t.length;e++)t[e].style.display="";return t},bg.prototype.find=function(e){var t=this[0],a=[];if(!t||1!==t.nodeType&&9!==t.nodeType||"string"!=typeof e)return[];for(var i=0;i<this.length;i++){var s=this[i],n=bg(s.querySelectorAll(e));a.push.apply(a,n.slice())}return bg(a)})),function(e){"use strict";var t="colorPickerByGiro",a={},i=function(e,t,i){clearTimeout(a[i]),a[i]=setTimeout(e,t)},s=function(e,t,a){return e<t&&(e=t),e>a&&(e=a),e},n=function(){var e=this,t=e.settings,a='<input type="text" value="" data-cp-t="',i='<div class="cpBG fade"><div class="cp-colors"><div class="cp-white"><div class="cp-black"><div class="cp-cursor"></div></div></div><div class="cp-trigger"></div></div><div class="cp-hues"><div class="ie-1"></div><div class="ie-2"></div><div class="ie-3"></div><div class="ie-4"></div><div class="ie-5"></div><div class="ie-6"></div><div class="cp-cursor"></div><div class="cp-trigger" data-cp-t="h"></div></div><div class="cp-alpha"><div class="cp-chess-bg"><div class="cp-chess"></div></div><div class="cp-bg"></div><div class="cp-cursor"></div><div class="cp-trigger" data-cp-t="a"></div></div><div class="cp-values"><div class="cp-prev"><i>&nbsp;</i></div><div class="cp-hex">Hex: '+a+'" /></div><div class="cp-r">R: '+a+'r" /></div><div class="cp-g">G: '+a+'g" /></div><div class="cp-b">B: '+a+'b" /></div><div class="cp-a">A: '+a+'a" /></div></div><div class="cp-buttons"><div class="btn btn-default btn-none">'+t.text.none+'</div><div class="btn btn-info btn-close">'+t.text.close+'</div></div><div class="clear"></div></div>';e.$main.append(i)},r=function(e,t){var a=this,i=(a.settings,a.dragType),s=a.dragRect,n=a.hsva;e=Math.max(Math.min(e,s.width),0),t=Math.max(Math.min(t,s.height),0),"h"==i?n.h=t/s.height:"a"==i?n.a=Number((t/s.height).toFixed(3)):(n.s=e/s.width,n.v=1-t/s.height),"undefined"!=typeof n.s&&a.setValue(n)},c=function(){var t,a,n=this,c=(n.settings,!1),o=function(t){if(!c){t.stopPropagation(),t.preventDefault();var a=e(t.target).parent().find(".cp-trigger"),i=a[0].getBoundingClientRect();n.dragType=a.attr("data-cp-t"),c=!0,n.dragRect={x:i.left,y:i.top,width:i.right-i.left,height:i.bottom-i.top},r.call(n,t.offsetX||t.layerX,t.offsetY||t.layerY)}},l=function(e){c&&(e.stopPropagation(),c=!1,delete n.dragType,delete n.dragRect)},d=n.$main.find(".cpBG");n.$main.find(".cp-trigger").on("mousedown touchstart",o).on("mouseup touchend",l),n.$main.on("mousemove touchmove",function(e){if(c){var t=n.dragRect;r.call(n,e.clientX-t.x,e.clientY-t.y)}}),e("body").on("mouseup touchend",l),t=n.$main.find(".cp-values div:not(.cp-hex) [data-cp-t]"),t.on("keyup",function(){i(function(){for(var e={},a=0;a<t.length;a++){var i=t[a],r=i.getAttribute("data-cp-t"),c=parseFloat(i.value);e[r]="a"!=r?s(c,0,255):s(c,0,1)}n.hsva=n.rgb2hsv(e.r,e.g,e.b),n.hsva.a=e.a,n.setValue()},350,"r")}),n.$main.find(".cp-hex input").on("keyup",function(){var t=e(this);i(function(){n.setValue(t.val())},350,"h")}),d.slideUp(),n.$main.find(".cp-buttons .btn-close").on("click",function(){d.slideUp().removeClass("in")}),n.$main.find(".cp-buttons .btn-none").on("click",function(){n.setValue({h:0,s:0,v:1,a:0}),n.$eleInput.val("").triggerHandler("input"),n.$main.find("input").val("")}),a=function(){d.addClass("in").slideDown()},n.$eleInput.on("focus",a),n.$element.on("click",a)},o={init:function(t,a){var i=this;i.$element=t,i.settings=e.extend({},{preview:"",showPicker:!0,format:"rgb",sliderGap:6,cursorGap:6,text:{close:"Close",none:"None"}},a);var s=i.settings;s.format=s.format.toLowerCase(),s.preview=!!s.preview.length&&s.preview,i.$eleInput=i.$element.find("input"),i.$main=i.$element.wrap('<div class="cp-cont"></div>').parent(),n.call(i),c.call(i),i.hsva={h:.5,s:0,v:0,a:1},i.setValue()},setValue:function(t){var a,s,n,r,c=this,o=c.settings,l=t||c.hsva,d="",p=o.sliderGap,v=o.cursorGap,u=c.$main.find(".cp-colors .cp-cursor"),h=c.$main.find(".cp-hues .cp-cursor"),g=c.$main.find(".cp-alpha .cp-cursor");switch("string"==typeof l&&(l=c.str2hsva(l)),c.hsva=l,a=c.hsv2rgb(l.h,l.s,l.v),a.a=l.a||0===l.a?l.a:1,n=c.hsv2rgb(l.h,1,1),n=c.rgb2str(n.r,n.g,n.b),r=c.rgb2str(a.r,a.g,a.b,l.a),s=c.rgb2hex(a.r,a.g,a.b),o.format){case"hsl":case"hsla":d=c.hsv2hsl(l.h,l.s,l.v),d=c.hsl2str(d.h,d.s,d.l,l.a);break;case"rgb":case"rgba":d=r;break;case"hex":default:d=s}c.$eleInput.val(d).triggerHandler("input"),o.preview&&(o.preview instanceof e?o.preview:c.$element.find(o.preview)).css("background-color",r),c.$main.find(".cp-values .cp-hex input").val(s);for(var f in a)c.$main.find('.cp-values [data-cp-t="'+f+'"]').val(a[f]);h.css("background-color",n),u.css("background-color",s),c.$main.find(".cp-colors").css("background-color",n),c.$main.find(".cp-alpha .cp-cursor").css("background",r),c.$main.find(".cp-alpha .cp-bg").css("background","linear-gradient(to bottom, transparent, "+s+")"),u.css({left:200*l.s-v+"px",top:200*(1-l.v)-v+"px"}),h.css("top",200*l.h-p+"px"),g.css("top",200*l.a-p+"px"),c.$main.find(".cp-values .cp-prev i").css("background-color",r),i(function(){c.$element.triggerHandler("selected.colorPickerByGiro",{hexadecimal:s,hsva:c.hsva,rgba:a,rgbaStr:r})},400,"c")},str2hsva:function(e){function t(e){return e.replace(/[a-z;\(\)]/g,"").split(",")}var a,i,s=this,n={},r=void 0;if(e&&""!=e||(e="#fff"),a=e.trim().toLowerCase(),a.indexOf("rgb")>=0){a=t(a),console.log(a);for(var c=0;c<3;c++)i=parseFloat(a[c]),a[c].indexOf("%")>=0&&(i*=2.55),a[c]=i;r=s.rgb2hsv(a[0],a[1],a[2]),4==a.length&&(r.a=a[3])}else a.indexOf("hsl")>=0?(a=t(a),r=s.hsl2hsv(a[0]/360,a[1]/100,a[2]/100),4==a.length&&(r.a=a[3])):(n=s.hex2rgb(a),r=s.rgb2hsv(n.r,n.g,n.b));return r},hsv2rgb:function(e,t,a){var i=Math.floor,s=parseFloat;e=s(e)||0,t=s(t)||0,a=s(a)||0;var n,r,c,o=255,l=i(6*e),d=6*e-l,p=a*(1-t),v=a*(1-d*t),u=a*(1-(1-d)*t);switch(l%6){case 0:n=a,r=u,c=p;break;case 1:n=v,r=a,c=p;break;case 2:n=p,r=a,c=u;break;case 3:n=p,r=v,c=a;break;case 4:n=u,r=p,c=a;break;case 5:n=a,r=p,c=v}return{r:i(n*o),g:i(r*o),b:i(c*o)}},rgb2hsv:function(e,t,a){var i,s=Math.max(e,t,a),n=Math.min(e,t,a),r=s-n,c=0===s?0:r/s,o=s/255;switch(s){case n:i=0;break;case e:i=t-a+r*(t<a?6:0),i/=6*r;break;case t:i=a-e+2*r,i/=6*r;break;case a:i=e-t+4*r,i/=6*r}return{h:i,s:c,v:o}},hex2rgb:function(e){var t=e.replace("#","").slice(0,6);console.log(t),t=t.match(new RegExp("(.{"+t.length/3+"})","g"));for(var a=0;a<t.length;a++)t[a]=parseInt(1==t[a].length?t[a]+t[a]:t[a],16);return{r:t[0],g:t[1],b:t[2]}},rgb2str:function(e,t,a,i){var s="rgb",n=[e,t,a];return"undefined"!=typeof i&&(s+="a",n.push(i)),s+"("+n.join(",")+")"},rgb2hex:function(e,t,a){return"#"+((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1).toUpperCase()},hsv2hsl:function(e,t,a){return{h:e,s:t*a/((e=(2-t)*a)<1?e:2-e),l:e/2}},hsl2hsv:function(e,t,a){return t*=a<.5?a:1-a,{h:e,s:2*t/(a+t),v:a+t}},hsl2str:function(e,t,a,i){var s="hsl",n=[360*e,100*t+"%",100*a+"%"];return"undefined"!=typeof i&&(s+="a",n.push(i)),s+"("+n.join(",")+")"}},l=function(a){var i=this.data(t+"_data");if(i)return"string"==typeof a&&i[a]?i[a].apply(i,Array.prototype.slice.call(arguments,1)):console.log("Method "+a+" does not exist on jQuery."+t);if(!a||"object"==typeof a){for(var s=this.length,n=0;n<s;n++){var r=e(this[n]);i=e.extend({},o),i.init(r,a),r.data(t+"_data",i)}return this}return console.log("jQuery."+t+' is not instantiated. Please call $("selector").'+t+"({options})")};e.fn?e.fn[t]=l:e.prototype[t]=l}(bg);